<!DOCTYPE html>
<html lang="es">
  <head>
    <script>
      function entrada() {
        var datos = [];
        var orden = 1;
        var entrada = "";

        for (let indice = 0; entrada != "f"; orden++) {
          var entrada = prompt(
            "Introduce el dato número " +
              orden +
              "\nPara terminar de introducir datos, introduzca f"
          );
          if (entrada == null) return;

          if (entrada != "f") {
            datos.push(entrada);
          } else {
            media(datos);
            rango(datos);
            moda(datos);
          }
        }
      }

      function media(x) {
        var suma = 0;
        for (let indice = 0; indice < x.length; indice++) {
          suma += Number(x[indice]);
        }
        var mediaCalculada = suma / x.length;

        alert("La media de los valores introducidos es: " + mediaCalculada);
      }

      function rango(x) {
        var min = Number(x[0]);
        var max = Number(x[0]);

        for (var i = 0; i < x.length; i++) {
          if (Number(x[i]) < min) {
            min = x[i];
          }
        }
        for (var i = 0; i < x.length; i++) {
          if (Number(x[i]) > max) {
            max = x[i];
          }
        }

        var rangoCalculado = max - min;
        alert("El rango de los números introducidos es: " + rangoCalculado);
      }

      function moda(x) {
        if (x.length === 0) {
          return null;
        }
        var contador = [];
        for (var indice = 0; indice < x.length; indice++) {
          var numero = x[indice];
          contador[numero] = (contador[numero] || 0) + 1;
        }

        var moda = null;
        var maxFrecuencia = 0;

        for (var indice in contador) {
          if (contador[indice] > maxFrecuencia) {
            moda = parseFloat(indice);
            maxFrecuencia = contador[indice];
          } else {
            alert("No tiene moda");
          }
        }

        alert("La moda es: " + moda);
      }
    </script>
  </head>
  <body onload="entrada();"></body>
</html>
