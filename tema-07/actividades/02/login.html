<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Iniciar Sesión</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous" />

  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css" />
  
</head>
<body>
    <script>
        class Login {
            #usuarios = [
                { usuario: 'diego', contraseña: 'Diego1234' },
                { usuario: 'pablo', contraseña: 'Pablo1234' },
                { usuario: 'juanmaria', contraseña: 'Juan1234' }
            ];

            #validaContraseña() {
                var contraseña = document.getElementById("contraseña");

                // Patrón: 8 caracteres mínimo, al menos 1 mayúscula, 1 minúscula, y 1 número
                var patron = /^(?=.*[a-z])(?=.*[A-Z])(?=.*\d).{8,}$/;

                if (!patron.test(contraseña.value)) {
                    contraseña.setCustomValidity("Formato de contraseña incorrecto. Debe tener al menos 8 caracteres, 1 mayúscula, 1 minúscula y 1 número.");
                } else {
                    contraseña.setCustomValidity("");
                }
            }

            #iniciarSesion() {
                var usuario = document.getElementById("usuario").value;
                var contraseña = document.getElementById("contraseña").value;

                var usuarioValido = this.#usuarios.find(u => u.usuario === usuario && u.contraseña === contraseña);

                if (usuarioValido) {
                    alert("Se ha iniciado sesión");
                   
                } else {
                    alert("No coinciden usuario o contraseña");
                }
            }

            #fEvento() {
                var bot = document.getElementById("bot");
                bot.addEventListener('click', this.#validaContraseña.bind(this));
                bot.addEventListener('click', this.#iniciarSesion.bind(this));
            }

            constructor() {
                this.#fEvento();
            }
        }

        window.onload = function () {
            new Login();
        };
    </script>

    <form id="form1">
        <div class="container text-left">
            <h1>Iniciar Sesión</h1>
            <br />
            <div class="pb-3 mb-4 border-bottom">
                <div class="row align-items-start">
                    <div class="col-4">
                        <label>Usuario:</label>
                        <input
                            type="text"
                            class="form-control"
                            id="usuario"
                            name="usuario"
                            required
                        />
                    </div>
                    <div class="col-4">
                        <label>Contraseña:</label>
                        <input
                            type="password"
                            class="form-control"
                            id="contraseña"
                            name="contraseña"
                            required
                        />
                    </div>
                </div>
            </div>
            <br />
            <button id="bot" type="submit" class="btn btn-primary" name="bot">
                Iniciar Sesión
            </button>
        </div>
    </form>
</body>
</html>
