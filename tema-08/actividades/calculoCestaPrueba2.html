<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Ejemplo Cesta de la compra</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN"
      crossorigin="anonymous"
    />

    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css"
    />
    <style>
      .tablas-container {
        display: flex;
        padding: 15px;
        margin: 20px;
        gap: 1em;
        align-items: baseline;
      }

      .main-container {
        display: flex;
        gap: 1em;
        justify-content: space-between;
      }

      .card-container {
        display: flex;
        flex-wrap: wrap;
        gap: 1em;
        width: 50%; /* Ajusta el ancho del contenedor de cards según tus necesidades */
      }

      .card {
        width: calc(30% - 1em);
        margin-bottom: 1em;
        margin-left: 1em;

      }

      .card-img-top {
        width: 150px; /* Establece el ancho de la imagen según tus necesidades */
        height: 150px; /* Establece la altura de la imagen según tus necesidades */
        object-fit: cover; /* Mantiene la proporción y recorta la imagen si es necesario */
        align-self: center;
      }

    </style>
    <script>
      class Producto {
        constructor(id, nombre, precio, imagen_url) {
          this.id = id;
          this.nombre = nombre;
          this.precio = precio;
          this.imagen_url = imagen_url;
        }
      }

      class Cesta {
        constructor() {
          this.productos = [];
        }

        agregarProducto(producto) {
          this.productos.push(producto);
        }

        calcularTotal() {
          var total = 0;
          for (var producto of this.productos) {
            total += producto.precio;
          }
          return total;
        }
      }

      class Catalogo {
        constructor() {
          this.productos = [
            new Producto(1, "Bolso", 20, "https://source.unsplash.com/random/100x100/?handbag"),
            new Producto(2, "Móvil", 120, "https://source.unsplash.com/random/100x100/?iphone"),
            new Producto(3, "Taza", 10, "https://source.unsplash.com/random/100x100/?cup"),
            new Producto(4, "Zapatos", 50.5, "https://source.unsplash.com/random/100x100/?shoe"),
            new Producto(5, "Vestido", 30, "https://source.unsplash.com/random/100x100/?dress"),
            new Producto(6, "Cámara", 100, "https://source.unsplash.com/random/100x100/?camera"),
          ];
        }

        getProductos() {
          return this.productos;
        }

        buscarProducto(id) {
          return this.productos.find((producto) => producto.id === id);
        }
      }

      window.onload = function () {
        const catalogo = new Catalogo();
        const contProductos = document.getElementById("contProductos");

        // Renderizar productos dinámicamente como cards
        const productos = catalogo.getProductos();
        for (let i = 0; i < productos.length; i++) {
          const card = document.createElement("div");
          card.classList.add("card");

          const img = document.createElement("img");
          img.src = productos[i].imagen_url;
          img.alt = productos[i].nombre;
          img.classList.add("card-img-top");

          const cardBody = document.createElement("div");
          cardBody.classList.add("card-body");

          const title = document.createElement("h5");
          title.classList.add("card-title");
          title.textContent = productos[i].nombre;

          const text = document.createElement("p");
          text.classList.add("card-text");
          text.textContent = `€${productos[i].precio.toFixed(2)}`;

          const btn = document.createElement("a");
          btn.href = "#";
          btn.classList.add("btn", "btn-primary");
          btn.textContent = "Agregar a la cesta";

          cardBody.appendChild(title);
          cardBody.appendChild(text);
          cardBody.appendChild(btn);

          card.appendChild(img);
          card.appendChild(cardBody);

          contProductos.appendChild(card);
        }
      };
    </script>
  </head>
  <body>
    <header class="align-content-center">
      <i class="bi bi-bag" style="font-size: 3rem">
        <span class="fs-1">Cálculo de la cesta de la compra</span></i
      >
    </header>
    <hr />
    <div class="main-container">
      <div class="card-container" id="contProductos">
        <!-- Contenedor dinámico de productos como cards -->
      </div>
      <div class="col">
        <table class="table" id="cesta">
          <i class="bi bi-basket" style="font-size: 2rem">
            <span class="fs-2">Cesta</span>
          </i>
          <thead>
            <tr>
              <th scope="col">Cod</th>
              <th scope="col">Nombre</th>
              <th scope="col">Cantidad</th>
              <th scope="col">Precio (€)</th>
              <th scope="col">Subtotal</th>
            </tr>
          </thead>
          <hr />
        </table>
      </div>
    </div>
  </body>
</html>
