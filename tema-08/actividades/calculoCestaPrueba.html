<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Ejemplo Cesta de la compra</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN"
      crossorigin="anonymous"
    />

    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css"
    />
    <style>
      .tablas-container {
        display: flex;
        padding: 15px;
        margin: 20px;
        gap: 1em;
        align-items: baseline;
      }

      table {
        max-width: 600px;
        margin-right: auto;
        margin-left: auto;
      }

      /* Estilos para centrar la información de cada producto */
      td {
        text-align: center;
        vertical-align: middle;
      }
    </style>
    <script>
      class Producto {
        constructor(id, nombre, precio, imagen_url) {
          this.id = id;
          this.nombre = nombre;
          this.precio = precio;
          this.imagen_url = imagen_url;
        }
      }

      class Cesta {
        constructor() {
          this.productos = [];
        }

        agregarProducto(producto) {
          this.productos.push(producto);
        }

        calcularTotal() {
          var total = 0;
          for (var producto of this.productos) {
            total += producto.precio;
          }
          return total;
        }
      }

      class Catalogo {
        constructor() {
          this.productos = [
            new Producto(
              1,
              "Bolso",
              20,
              "https://source.unsplash.com/random/500x500/?handbag"
            ),
            new Producto(
              2,
              "Móvil",
              120,
              "https://source.unsplash.com/random/500x500/?iphone"
            ),
            new Producto(
              3,
              "Taza",
              10,
              "https://source.unsplash.com/random/500x500/?cup"
            ),
            new Producto(
              4,
              "Zapatos",
              50.5,
              "https://source.unsplash.com/random/500x500/?shoe"
            ),
            new Producto(
              5,
              "Vestido",
              30,
              "https://source.unsplash.com/random/500x500/?dress"
            ),
            new Producto(
              6,
              "Cámara",
              100,
              "https://source.unsplash.com/random/500x500/?camera"
            ),
          ];
        }

        getProductos() {
          return this.productos;
        }

        buscarProducto(id) {
          return this.productos.find((producto) => producto.id === id);
        }
      }

      window.onload = function () {
        const catalogo = new Catalogo();
        const contProductos = document.getElementById("contProductos");

        // Renderizar productos dinámicamente
        const productos = catalogo.getProductos();
        for (let i = 0; i < productos.length; i++) {
          // Crear una nueva fila cada tres productos
          if (i % 3 === 0) {
            var newRow = document.createElement("tr");
            newRow.classList.add("align-items-start");
            contProductos.appendChild(newRow);
          }

          const productoDiv = document.createElement("td");

          const img = document.createElement("img");
          img.src = productos[i].imagen_url;
          img.alt = productos[i].nombre;
          img.style.width = "100px"; // Establece el ancho de la imagen según tus necesidades

          const nombreDiv = document.createElement("div");
          nombreDiv.textContent = productos[i].nombre;

          const precioDiv = document.createElement("div");
          precioDiv.textContent = `€${productos[i].precio.toFixed(2)}`;

          productoDiv.appendChild(img);
          productoDiv.appendChild(nombreDiv);
          productoDiv.appendChild(precioDiv);

          // Agregar el borde derecho a cada celda (td) excepto la última
          if (i % 3 !== 2) {
            productoDiv.style.borderRight = "1px solid #dee2e6";
          }

          newRow.appendChild(productoDiv);
        }
      };
    </script>
  </head>
  <body>
    <header class="align-content-center">
      <i class="bi bi-bag" style="font-size: 3rem">
        <span class="fs-1">Cálculo de la cesta de la compra</span></i
      >
    </header>
    <hr />
    <div class="tablas-container">
      <table class="table table-bordered" id="contProductos">
        <!-- Contenedor dinámico de productos -->
      </table>
      <div class="col">
        <table class="table">
          <i class="bi bi-basket" style="font-size: 2rem">
            <span class="fs-2">Cesta</span>
          </i>
          <thead>
            <tr>
              <th scope="col">Cod</th>
              <th scope="col">Nombre</th>
              <th scope="col">Cantidad</th>
              <th scope="col">Precio (€)</th>
              <th scope="col">Subtotal</th>
            </tr>
          </thead>
          <hr />
        </table>
      </div>
    </div>
  </body>
</html>
